apiVersion: messaging.knative.dev/v1alpha1
kind: InMemoryChannel
metadata:
  name: gitlabchannel
  
---
apiVersion: v1
kind: Secret
metadata:
  name: gitlabsecret
type: Opaque
stringData:
  accessToken: "<access token>"
  secretToken: "<webhook secret>"
  
---
apiVersion: sources.eventing.triggermesh.dev/v1alpha1
kind: GitLabSource
metadata:
  name: gitlabsource-sample
spec:
  eventTypes:
  - push_events
  - issues_events
  projectUrl: "<project url>"
  accessToken:
    secretKeyRef:
      name: gitlabsecret
      key: accessToken
  secretToken:
    secretKeyRef:
      name: gitlabsecret
      key: secretToken
  sink:
    apiVersion: messaging.knative.dev/v1alpha1
    kind: InMemoryChannel
    name: gitlabchannel

